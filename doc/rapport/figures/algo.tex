\begin{algorithm}[h!]
  $fin \leftarrow Faux$\;
  $k \leftarrow 0$\;
  \Tq{non $fini$} {
    $N_k \leftarrow prendre\_instantane()$\;
    \uSi{$k \% 2 = 0$} {
      % test d'arrêt
      \uSi{$N_k$ ne contient aucun voisin ou \\
           $N_k$ est le cas $(a)$, $(b)$ ou $(j)$ et $N_{k-2}=rotation(N_k)$}{
          $fini \leftarrow Vrai$\;
      }
      % mouvement si il n'y a personne en (i,j-2) ou (i+1,j-2)
      \SinonSi{$N_k$ est le cas $(f)$ ou $(m)$ et
      ($i-2$,$j$) et ($i-2$,$j+1$) sont pleins soit vides ou \\
      $N_k$ est le cas $(g)$ ou $(n)$ et
      ($i+2$,$j$) et ($i+2$,$j+1$) sont pleins soit vides} {
        se dépacer selon $N_k$\;
      }
    }
    \Sinon{
      \Si{$N_{k-1}$ est le cas $(f)$ ou $(g)$ et ($i+1$,$j$), ($i+1$,$j-1$) et
          ($i$,$j-1$) sont tous vides ou \\
          $N_{k-1}$ est le cas $(g)$ ou $(n)$ et ($i-1$,$j$), ($i-1$,$j-1$) et
          ($i$,$j-1$) sont tous vides} {
          se déplacer en $(i,j-1)$\;
      }
    }
    $k \leftarrow k+1$\;
  }
  \caption{Algorithme de rassemblement d'agents mobiles}
  \label{fig:algo}
\end{algorithm}
